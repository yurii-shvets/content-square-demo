import { ContentsquareModule } from './nativeModules';

/**
 * Exports CS userId with which the client is opted in with.
 *
 * @param {function} onUserIdObtained - A callback that consumes the userId.
 */
export const getUserId = onUserIdObtained => {
  ContentsquareModule.getUserId(onUserIdObtained);
};

/**
 * Opt user IN Contentsquare tracking program.
 * This allows Contentsquare SDK gather user behaviors while navigating through the app.
 */
export const optIn = () => {
  ContentsquareModule.optIn();
};

/**
 * Opt user OUT of the Contentsquare tracking program.
 * This will stop Contentsquare SDK from gathering any further user behavior while navigating
 * around the app.
 */
export const optOut = () => {
  ContentsquareModule.optOut();
};

/**
 * Forget userId and session related information if user is opted-IN.
 */
export const forgetMe = () => {
  ContentsquareModule.forgetMe();
};

/**
 * Sends a User Identifier to Contentsquare tracking services. This identifier is immediately
 * hashed so no PII can ever be accessed.
 *
 * @param userIdentifier as {@link String}. The user identifier should be max 100 characters long.
 */
export const sendUserIdentifier = userIdentifier => {
  if (typeof userIdentifier === 'string') {
    ContentsquareModule.sendUserIdentifier(userIdentifier);
  } else {
    console.error('The User Identifier must be of string data type.');
  }
};
